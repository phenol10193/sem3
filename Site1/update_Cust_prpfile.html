<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <title>Profile Page</title>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
            $(document).ready(function () {
                $("#update-form").submit(function (e) {
                    e.preventDefault();

                    var customerId = $("#customer-id").val();
                    var oldPassword = $("#old-password").val();
                    var firstName = $("#first-name").val();
                    var middleName = $("#middle-name").val();
                    var lastName = $("#last-name").val();
                    var gender = $("#gender").val();
                    var birthOfDate = $("#birth-of-date").val();
                    var phoneNumber = $("#phone-number").val();
                    var email = $("#email").val();
                    var address = $("#address").val();
                    var typeCustomer = $("#type-customer").val();
                    var cloginName = $("#clogin-name").val();
                    var password = $("#password").val();
                    var imageFile = $("#image")[0].files[0];

                    // Tạo đối tượng FormData để gửi dữ liệu form kèm tệp tải lên
                    var formData = new FormData();
                    formData.append("CustomerId", customerId);
                    formData.append("OldPassword", oldPassword);
                    formData.append("FirstName", firstName);
                    formData.append("MiddleName", middleName);
                    formData.append("LastName", lastName);
                    formData.append("Gender", gender);
                    formData.append("BirthOfDate", birthOfDate);
                    formData.append("PhoneNumber", phoneNumber);
                    formData.append("Email", email);
                    formData.append("Address", address);
                    formData.append("TypeCustomer", typeCustomer);
                    formData.append("CLoginName", cloginName);
                    formData.append("Password", password);
                    formData.append("Image", imageFile);

                    // Gửi yêu cầu cập nhật thông tin
                    $.ajax({
                        url: "/api/profile/update",
                        method: "POST",
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function (response) {
                            alert("Cập nhật thông tin thành công.");
                            // Xử lý các thao tác sau khi cập nhật thành công
                        },
                        error: function (xhr, status, error) {
                            alert("Có lỗi xảy ra khi cập nhật thông tin.");
                            console.log(xhr.responseText);
                        }
                    });
                });
            });
        </script>
    </head>

    <body>
        <h1>Profile Page</h1>
        <form id="update-form" enctype="multipart/form-data">
            <input type="hidden" id="customer-id" name="customerId" value="1">

            <label for="old-password">Mật khẩu cũ:</label>
            <input type="password" id="old-password" name="oldPassword"><br>

            <label for="first-name">Tên:</label>
            <input type="text" id="first-name" name="firstName"><br>

            <label for="middle-name">Họ đệm:</label>
            <input type="text" id="middle-name" name="middleName"><br>

            <label for="last-name">Họ:</label>
            <input type="text" id="last-name" name="lastName"><br>

            <label for="gender">Giới tính:</label>
            <select id="gender" name="gender">
                <option value="Male">Nam</option>
                <option value="Female">Nữ</option>
            </select><br>

            <label for="birth-of-date">Ngày sinh:</label>
            <input type="date" id="birth-of-date" name="birthOfDate"><br>

            <label for="phone-number">Số điện thoại:</label>
            <input type="text" id="phone-number" name="phoneNumber"><br>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email"><br>

            <label for="address">Địa chỉ:</label>
            <input type="text" id="address" name="address"><br>

            <label for="type-customer">Loại khách hàng:</label>
            <input type="text" id="type-customer" name="typeCustomer"><br>

            <label for="clogin-name">CLoginName:</label>
            <input type="text" id="clogin-name" name="cloginName"><br>

            <label for="password">Mật khẩu:</label>
            <input type="password" id="password" name="password"><br>

            <label for="image">Ảnh đại diện:</label>
            <input type="file" id="image" name="image"><br>

            <button type="submit">Cập nhật</button>
        </form>
    </body>

</html>
